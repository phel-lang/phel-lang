(ns phel-test\test\core\set-operation
  (:require phel\test :refer [deftest is]))

(deftest test-set-union
  (is (= (hash-set) (union)) "set 0-ary union")
  (is (= (hash-set 0 1 2 3) (union (hash-set 1 2) (hash-set 0 3))) "set union")
  (is (= (hash-set 0 1 2 3) (union (hash-set 1 2) (hash-set 0 1 2 3))) "set union with common values"))

(deftest test-intersection
  (is (= (hash-set) (intersection (hash-set 1 2) (hash-set 0 3))) "set intersection")
  (is (= (hash-set 1 2) (intersection (hash-set 1 2) (hash-set 0 1 2 3))) "set intersection with common values"))

(deftest test-difference
  (is (= (hash-set 1 2) (difference (hash-set 1 2) (hash-set 0 3))) "set difference")
  (is (= (hash-set) (difference (hash-set 1 2) (hash-set 0 1 2 3))) "set difference")
  (is (= (hash-set "1") (difference (hash-set "1" 2) (hash-set 0 1 2 3))) "set difference type checks")
  (is (= (hash-set 0 3) (difference (hash-set 0 1 2 3) (hash-set 1 2))) "set difference with common values"))

(deftest test-symmetric-difference
  (is (= (hash-set 0 1 2 3) (symmetric-difference (hash-set 1 2) (hash-set 0 3))) "set symmetric-difference")
  (is (= (hash-set 0 3) (symmetric-difference (hash-set 1 2) (hash-set 0 1 2 3))) "set symmetric-difference with common values"))

(deftest test-subset?
  (is (subset? (hash-set) (hash-set)) "empty sets")
  (is (subset? (hash-set) (hash-set 1 2)) "empty is subset of any")
  (is (subset? (hash-set 1 2) (hash-set 1 2 3)) "proper subset")
  (is (subset? (hash-set 1 2 3) (hash-set 1 2 3)) "equal sets are subsets")
  (is (= false (subset? (hash-set 1 2 3) (hash-set 1 2))) "superset is not subset")
  (is (= false (subset? (hash-set 4) (hash-set 1 2 3))) "disjoint is not subset"))

(deftest test-superset?
  (is (superset? (hash-set) (hash-set)) "empty sets")
  (is (superset? (hash-set 1 2) (hash-set)) "any is superset of empty")
  (is (superset? (hash-set 1 2 3) (hash-set 1 2)) "proper superset")
  (is (superset? (hash-set 1 2 3) (hash-set 1 2 3)) "equal sets are supersets")
  (is (= false (superset? (hash-set 1 2) (hash-set 1 2 3))) "subset is not superset")
  (is (= false (superset? (hash-set 1 2 3) (hash-set 4))) "disjoint is not superset"))
